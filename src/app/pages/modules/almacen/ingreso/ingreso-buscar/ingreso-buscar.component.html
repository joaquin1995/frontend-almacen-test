<app-main-container
  (recargarChange)="reload()"
  [icon]="'bx bx-search-alt'"
  [titulo]="'Ingresos'"
  [descripcion]="
    'Busca y filtra Ingresos para realizar diferentes acciones con el registro'
  "
>
  <!-- <pre>{{this.parametrosBusqueda | json}}</pre> -->

  <div class="mt-5">
    <app-filtro-busqueda
      [valorSeleccionado]="this.valorSeleccionado"
      [parametroSeleccionado]="this.parametroSeleccionado"
      [cantidadMostrarSeleccionado]="this.cantidadMostrarSeleccionado"
      [filtros]="filtros"
      (buscar)="buscarFiltro($event)"
    ></app-filtro-busqueda>
  </div>

  <div class="mt-3">
    <ngx-datatable
      class="bootstrap"
      [rows]="this.arrayDatos"
      [headerHeight]="40"
      [columnMode]="'force'"
      [footerHeight]="50"
      [rowHeight]="'auto'"
      [loadingIndicator]="this.banderaCargando"
      [externalPaging]="true"
      [count]="paginado.totalElementos"
      [limit]="paginado.cantidadMostrar"
      [offset]="paginado.numeroPaginaActual"
      [messages]="{
        emptyMessage: 'NingÃºn resultado encontrado',
        totalMessage: 'total'
      }"
      (page)="buscarPaginado($event)"
      [scrollbarH]="true"
    >
      <ngx-datatable-column name="Acciones" prop="num_sec">
        <ng-template ngx-datatable-cell-template let-row="row">
          <div class="text-right">
            <span data-label="Acciones">
              <button
                (click)="this.modificar(row)"
                class="btn btn-sm fa-2x"
                [ngbTooltip]="'Modificar Registro'"
                [placement]="'right'"
              >
                <i class="bx bxs-pencil text-primary"></i>
              </button>

              <button
                (click)="this.eliminar(row)"
                class="btn btn-sm fa-2x"
                [ngbTooltip]="'Eliminar Registro'"
                [placement]="'right'"
              >
              <i class="bx bxs-trash text-danger"></i>
              </button>

              <button
              (click)="this.insertarDetalle(row)"
              class="btn btn-sm fa-2x"
              [ngbTooltip]="'Insertar Detalle'"
              [placement]="'right'"
            >
              <i class="bx bx-note text-primary"></i>
            </button>

            <button
            (click)="this.detalle(row)"
            class="btn btn-sm fa-2x"
            [ngbTooltip]="'Ver Detalle'"
            [placement]="'right'"
          >
            <i class="bx bx-show-alt text-primary"></i>
          </button>


            </span>
          </div>
        </ng-template>
      </ngx-datatable-column>

      <!-- <ngx-datatable-column name="Acciones 2" prop="">
            <ng-template ngx-datatable-cell-template let-value="value">
              <div class="btn-group me-1 mt-2" ngbDropdown>
                <button type="button" class="btn btn-primary dropdown-toggle" ngbDropdownToggle>Primary <i
                    class="mdi mdi-chevron-down"></i></button>
                <div class="dropdown-menu" ngbDropdownMenu>
                  <a class="dropdown-item" href="javascript: void(0);">Action</a>
                  <a class="dropdown-item" href="javascript: void(0);">Another action</a>
                  <a class="dropdown-item" href="javascript: void(0);">Something else here</a>
                  <div class="dropdown-divider"></div>
                  <a class="dropdown-item" href="javascript: void(0);">Separated link</a>
                </div>
              </div>
            </ng-template>
        </ngx-datatable-column> -->

      <!-- created_at: "04/29/2022 10:02:26"
        impuesto: 13
        nsec_proveedor: 3
        nsec_ususario: 2
        num_comprobante: "123"
        num_sec: 9
        proveedor: "JUAN PEREZ"
        serie_comprobante: "0X0X"
        tipo_comprobante: "FACTURA"
        total_ingresos: 1300
        updated_at: null
        usuario: "JOAQUIN ANTELO" -->

      <ngx-datatable-column name="Proveedor" prop="proveedor">
        <ng-template ngx-datatable-cell-template let-value="value">
          <span data-label="Nombres">{{ value }}</span>
        </ng-template>
      </ngx-datatable-column>

      <ngx-datatable-column name="Usuario" prop="usuario">
        <ng-template ngx-datatable-cell-template let-value="value">
          <span data-label="Nombres">{{ value }}</span>
        </ng-template>
      </ngx-datatable-column>

      <ngx-datatable-column name="Tipo comprobante" prop="tipo_comprobante">
        <ng-template ngx-datatable-cell-template let-value="value">
          <span data-label="Nombres">{{ value }}</span>
        </ng-template>
      </ngx-datatable-column>

      <ngx-datatable-column name="Serie" prop="serie_comprobante">
        <ng-template ngx-datatable-cell-template let-value="value">
          <span data-label="Nombres">{{ value }}</span>
        </ng-template>
      </ngx-datatable-column>

      <ngx-datatable-column name="Nro comprobante" prop="num_comprobante">
        <ng-template ngx-datatable-cell-template let-value="value">
          <span data-label="Nombres">{{ value }}</span>
        </ng-template>
      </ngx-datatable-column>

      <ngx-datatable-column name="Total ingresos" prop="total_ingresos">
        <ng-template ngx-datatable-cell-template let-value="value">
          <span data-label="Nombres">{{ value }}</span>
        </ng-template>
      </ngx-datatable-column>

      <ngx-datatable-column name="Impuesto (%)" prop="impuesto">
        <ng-template ngx-datatable-cell-template let-value="value">
          <span data-label="Nombres">{{ value }}</span>
        </ng-template>
      </ngx-datatable-column>

      <ngx-datatable-column name="Fecha" prop="created_at">
        <ng-template ngx-datatable-cell-template let-value="value">
          <span data-label="Nombres">{{ value }}</span>
        </ng-template>
      </ngx-datatable-column>




    </ngx-datatable>
  </div>
</app-main-container>
